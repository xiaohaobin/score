<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>TaffyDB</title>
		<script src="taffy-min.js"></script>
	</head>
	<body>
		<h3>TaffyDB数据库，无演示效果，大家些注意查看原代码！</h3>
		<pre>//创建一个数据库
var friends = TAFFY([
    {"id":1,"gender":"M","first":"John","last":"Smith","city":"Seattle, WA","status":"Active"},
    {"id":2,"gender":"F","first":"Kelly","last":"Ruth","city":"Dallas, TX","status":"Active"},
    {"id":3,"gender":"M","first":"Jeff","last":"Stevenson","city":"Washington, D.C.","status":"Active"},
    {"id":4,"gender":"F","first":"Jennifer","last":"Gill","city":"Seattle, WA","status":"Active"}    
]);

//遍历数组
friends().each(function(e,i){console.log(e,i)});

//使用字段名或者字段的关系过滤
// Find all the friends in Seattle
friends({city:"Seattle, WA"});

// Find John Smith, by ID
friends({id:1});

// Find John Smith, by Name
friends({first:"John",last:"Smith"});

//很容易访问数据
// Kelly's record
var kelly = friends({id:2}).first();

// Kelly's last name
var kellyslastname = kelly.last;

// Get an array of record ids
var cities = friends().select("id");

// Get an array of distinct cities
var cities = friends().distinct("city");

// Apply a function to all the male friends
friends({gender:"M"}).each(function (r) {
   alert(r.name + "!");
});

//快速地修改数据
// Move John Smith to Las Vegas
friends({first:"John",last:"Smith"}).update({city:"Las Vegas, NV:"});

// Remove Jennifer Gill as a friend
friends({id:4}).remove();

// insert a new friend
friends.insert({"id":5,"gender":"F","first":"Jennifer","last":"Gill","city":"Seattle, WA","status":"Active"});
</pre>
		<script>
			var maindata = [
				{
					"id": 1,
					"gender": "M",
					"first": "John",
					"last": "Smith",
					"city": "Seattle, WA",
					"status": "Active"
				},
				{
					"id": 2,
					"gender": "F",
					"first": "Kelly",
					"last": "Ruth",
					"city": "Dallas, TX",
					"status": "Active"
				},
				{
					"id": 3,
					"gender": "M",
					"first": "Jeff",
					"last": "Stevenson",
					"city": "Washington, D.C.",
					"status": "Active"
				},
				{
					"id": 4,
					"gender": "F",
					"first": "Jennifer",
					"last": "Gill",
					"city": "Seattle, WA",
					"status": "Active"
				},
				{
					"id": 6,
					"gender": "阿门",
					"first": "小",
					"last": "名",
					"city": "背景",
					"status": "unActive"
				},
			];
			//创建并填充数据
			var friends = TAFFY(maindata);

			//查找，注意得到的是一个TaffyDB对象
			// Find all the friends in Seattle
			var obj = friends({
				city: "Seattle, WA"
			});
			console.log(obj);
			console.log(obj.first(),"obj.first()");
			console.log(obj.last(),"obj.last()");

			// Kelly's record
			var kelly = friends({
				id: 2
			}).first();


			// Kelly's last name
			var kellyslastname = kelly.last;
			//alert(kellyslastname);
			// Get an array of record ids
			var cities = friends().select("id");

			// Get an array of distinct cities
			var cities = friends().distinct("city");
		</script>
	</body>
</html>
